(function(a){"use strict";var b=document.querySelectorAll(".tpgb-adv-map");Array.prototype.forEach.call(b,function(b){var c=a(b),d=c.data("id"),e=c.data("map-settings"),f=null,g=null,h=null,j=null;if(!c.hasClass("map-loaded")){var k=[],l=function(){!1,g=new google.maps.LatLngBounds,f=new google.maps.Map(document.getElementById(d),e.options),h=new google.maps.InfoWindow;var b,c;for(f.setTilt(45),google.maps.event.addListener(h,"domready",function(){var b=a(".gm-style-iw"),c=b.prev(),d=b.parent("div");d.addClass("marker-icon");var e=b.next();e.hide(),b.addClass("marker-title")}),c=0;c<e.places.length;c++)j=new google.maps.LatLng(e.places[c].latitude,e.places[c].longitude),g.extend(j),b=new google.maps.Marker({position:j,map:f,title:e.places[c].address,icon:e.places[c].pin_icon}),google.maps.event.addListener(b,"click",function(a,b){return function(){1<e.places[b].address.length&&h.setContent("<div class=\"gmap_info_content\"><p>"+e.places[b].address+"</p></div>"),h.open(f,a)}}(b,c)),f.fitBounds(g);var k=google.maps.event.addListener(f,"idle",function(){this.setZoom(e.options.zoom),google.maps.event.removeListener(k)}),l=function(){google.maps.event.trigger(f,"resize"),f.setCenter(j)};l()},m=function(){for(var a=0,b=k.length;a<b;a++)k[a]()},n=function(){m()};k.push(l),n(),c.addClass("map-loaded")}})})(jQuery);